<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ThunderModMan</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app">
      <!-- Mobile Menu Button -->
      <button class="mobile-menu-btn" id="mobile-menu-btn">â˜°</button>
      <div class="mobile-overlay" id="mobile-overlay"></div>

      <!-- Left Navigation Sidebar -->
      <aside class="nav-sidebar" id="nav-sidebar">
        <div class="logo">
          <div class="logo-icon"></div>
          <span class="logo-text">ThunderModMan</span>
        </div>

        <nav class="nav-tabs">
          <button class="nav-tab active" data-view="browse">
            <span class="nav-icon">âš›</span>
            <span class="nav-tab-text">Browse</span>
          </button>
          <button class="nav-tab" data-view="installed">
            <span class="nav-icon">âœ”</span>
            <span class="nav-tab-text">Installed</span>
            <span class="nav-badge" id="nav-installed-badge">0</span>
          </button>
          <button class="nav-tab" data-view="server">
            <span class="nav-icon">â˜°</span>
            <span class="nav-tab-text">Server</span>
          </button>
        </nav>

        <button class="sidebar-edge-toggle" id="nav-collapse-btn" title="Toggle sidebar">â€¹</button>
      </aside>





      <!-- Main Content Area -->
      <main class="main">
        <!-- Browse View -->
        <div class="view active" id="browse-view">
          <header class="view-header">
            <h1>Available Mods</h1>
            <div class="header-actions">
              <button class="filter-toggle-btn" id="filter-toggle-btn">
                â–¼ Filters
              </button>
              <button class="refresh-btn" id="refresh-btn">â†» Refresh</button>
            </div>
          </header>

          <!-- Collapsible Filter Dropdown -->
          <div class="filter-dropdown" id="filter-dropdown">
            <div class="filter-row">
              <div class="filter-group">
                <label for="community">Game Community</label>
                <select id="community">
                  <option value="">Loading...</option>
                </select>
              </div>
              <div class="filter-group">
                <label for="sort-select">Sort By</label>
                <select id="sort-select">
                  <option value="last-updated">Last Updated</option>
                  <option value="name">Name (A-Z)</option>
                  <option value="downloads">Downloads</option>
                  <option value="rating">Rating</option>
                </select>
              </div>
              <div class="filter-group search-group">
                <label for="search">Search</label>
                <input type="text" id="search" placeholder="Search mods..." />
              </div>
            </div>
            <div class="category-section">
              <div class="category-header">
                <span>Categories</span>
              </div>
              <div id="category-filters" class="category-filters">
                <!-- Populated by JS -->
              </div>
            </div>
            <div class="filter-stats">
              <span class="stat-label">Available Mods:</span>
              <span class="stat-value" id="total-mods">-</span>
              <span class="stat-divider">|</span>
              <span class="stat-label">Installed:</span>
              <span class="stat-value" id="installed-count">0</span>
            </div>
          </div>

          <div id="mod-container">
            <div class="empty-state">
              <div class="empty-icon">ðŸ“¦</div>
              <p>Select a game community to browse mods</p>
            </div>
          </div>
        </div>

        <!-- Installed View -->
        <div class="view" id="installed-view">
          <header class="view-header">
            <h1>Installed Mods</h1>
            <span class="installed-count-badge" id="installed-badge">0</span>
          </header>

          <div class="installed-grid" id="installed-list">
            <div class="empty-state">
              <div class="empty-icon">âˆ…</div>
              <p>No mods installed yet</p>
            </div>
          </div>
        </div>

        <!-- Server View -->
        <div class="view" id="server-view">
          <header class="view-header">
            <h1>Server Management</h1>
          </header>

          <div class="server-status-card" id="server-status-card">
            <div class="status-indicator">
              <span class="status-dot" id="server-status-dot"></span>
              <span class="status-text" id="server-status-text"
                >Server: Unknown</span
              >
            </div>
            <div class="server-info" id="server-info">
              <!-- Uptime info populated by JS -->
            </div>
          </div>

          <div class="server-controls-row">
            <button class="server-btn start-btn compact-btn" id="start-server-btn">â–¶</button>
            <button class="server-btn stop-btn compact-btn" id="stop-server-btn" disabled>â– </button>
            <button class="server-btn restart-btn compact-btn" id="restart-server-btn" disabled>â†»</button>
            <button class="server-btn compact-btn" id="utilities-toggle-btn" onclick="document.getElementById('utilities-card').classList.toggle('open')">âš™ Utilities â–¼</button>
          </div>

          <!-- Server Utilities Dropdown -->
          <div class="server-status-card collapsible-card" id="utilities-card">
            
            <div class="card-content utilities-grid-3">
              <!-- Auto-Stop Section (Left) -->
              <div class="utility-section">
                <h4>Auto-Stop</h4>
                <div class="auto-stop-controls">
                  <label class="toggle-switch" style="position: relative; display: inline-block; width: 44px; height: 24px;">
                    <input type="checkbox" id="auto-stop-toggle" style="opacity: 0; width: 0; height: 0;">
                    <span class="slider round" style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--bg-tertiary); transition: .4s; border-radius: 34px; border: 1px solid var(--border);"></span>
                  </label>
                  <input type="number" id="auto-stop-timeout" min="5" max="120" value="15" style="width: 50px; padding: 6px; background: var(--bg-tertiary); border: 1px solid var(--border); color: var(--text-primary); border-radius: 4px; text-align: center;">
                  <span style="color: var(--text-muted); font-size: 0.85rem;">min</span>
                </div>
                <span id="auto-stop-status" style="color: var(--text-secondary); font-size: 0.85rem; margin-top: 8px; display: block;">Disabled</span>
              </div>

              <!-- Backup Controls (Middle) -->
              <div class="utility-section bordered-left">
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                  <h4 style="margin: 0;">Backups</h4>
                  <button class="server-btn" id="create-backup-btn" style="width: 24px !important; height: 24px !important; min-width: 24px !important; min-height: 24px !important; padding: 0 !important; font-size: 1.1rem; display: flex; align-items: center; justify-content: center; line-height: 1; flex: none !important;">+</button>
                </div>
                <div class="backup-controls">
                  <div class="backup-row">
                    <label class="toggle-switch" style="position: relative; display: inline-block; width: 44px; height: 24px;">
                      <input type="checkbox" id="auto-backup-toggle" style="opacity: 0; width: 0; height: 0;">
                      <span class="slider round" style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--bg-tertiary); transition: .4s; border-radius: 34px; border: 1px solid var(--border);"></span>
                    </label>
                    <span style="color: var(--text-muted); font-size: 0.85rem;">Auto</span>
                  </div>
                </div>
              </div>

              <!-- Backup List (Right) -->
              <div class="utility-section bordered-left">
                <h4>Recent Backups</h4>
                <div class="backup-list" id="backup-list">
                  <div class="empty-backups">No backups yet</div>
                </div>
              </div>
            </div>
          </div>

          <div class="console-section">
            <div class="console-header">
              <h3>Console Output</h3>
            </div>
            <div class="inline-console" id="inline-console">
              <pre id="inline-console-output">Loading logs...</pre>
            </div>
          </div>
        </div>
      </main>

      <!-- Right Sidebar (Server Status - collapsible) -->
      <aside class="right-sidebar" id="right-sidebar">
        <button class="sidebar-edge-toggle" id="sidebar-toggle" title="Toggle Sidebar">â€º</button>

        <div class="sidebar-content">
          <h3>Server Status</h3>

          <div class="server-status" id="sidebar-server-status">
            <span class="status-dot"></span>
            <span class="status-text">Server: Unknown</span>
          </div>

          <button class="sidebar-btn" id="view-console-btn">
            â–¤ View Console
          </button>
          <button class="sidebar-btn" id="quick-restart-btn">
            â†» Restart Server
          </button>
        </div>
      </aside>



    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirm-modal">
      <div class="modal-content confirm-modal-content">
        <div class="modal-header">
          <h3>Confirm Uninstall</h3>
          <button class="modal-close" id="confirm-modal-close">âœ•</button>
        </div>
        <div class="modal-body">
          <p id="confirm-message">
            Are you sure you want to uninstall this mod?
          </p>
        </div>
        <div class="modal-footer confirm-actions">
          <button class="cancel-btn" id="confirm-cancel">Cancel</button>
          <button class="danger-btn" id="confirm-uninstall">Uninstall</button>
        </div>
      </div>
    </div>

    <!-- Console Modal (legacy - for sidebar quick access) -->
    <div class="modal" id="console-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Server Console</h3>
          <button class="modal-close" id="modal-close">âœ•</button>
        </div>
        <div class="modal-body">
          <pre id="console-output">Loading logs...</pre>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <script src="app.js"></script>
  </body>
</html>
